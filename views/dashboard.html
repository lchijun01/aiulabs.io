<!DOCTYPE html>
<html data-wf-page="66af256a3187c915f01d34bf" data-wf-site="66af256a3187c915f01d3448" lang="en">
<head>
    <meta charset="utf-8">
    <title>Dashboard - Aiulabs.io</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <meta name="google-signin-client_id" content="72022108734-gnmap0ipjhut9ncth1uuat3ip3k9sn2j.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <link href="/views/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="/views/css/webflow.css" rel="stylesheet" type="text/css">
    <link href="/views/css/aiulab-f081222d66777be51f-c0f7676780e4a.webflow.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Inter:regular,500,600,700"]  }});</script>
    <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
    <link href="/views/images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="/views/images/webclip.png" rel="apple-touch-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://kit.fontawesome.com/332cfc7815.js" crossorigin="anonymous"></script>
    <script>
        // Check if the URL has the signup=success query parameter
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('signup') === 'success') {
                const notificationDiv = document.getElementById('notification');
                notificationDiv.textContent = 'Sign up successful! You can now log in.';
                notificationDiv.style.display = 'block'; // Show the notification
            }
        };
    </script>
    <style>
        .top-bar {
            width: 100%; 
            justify-content: space-between; 
            display: flex; 
            background-color: #070710; 
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            align-items: center;
            border-bottom: 1px solid hsla(0, 0%, 100%, 0.1);
        }

        .side-bar {
            width: 270px;
            background-color: #070710; /* Dark background for sidebar */
            height: 100%;
            position: fixed;
            top: 60px; /* Height of the top bar */
            left: 0;
            box-sizing: border-box;
            z-index: 999;
            padding-top: 3%;
            border-right: 1px solid hsla(0, 0%, 100%, 0.1);
        }

        .side-bar ul {
            list-style-type: none;
            padding: 0;
        }

        .side-bar ul li {
            margin: 10px 15px;
        }

        .side-bar a {
            color: #ffffff;
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-radius: 8px;
            transition: background-color 0.3s;
            width: 100%;
        }

        .side-bar a:hover {
            background-color: #3B1F4C;
        }

        .side-bar a .icon {
            margin-right: 10px;
        }

        .side-bar .new-badge {
            background-color: #DD00AC;
            color: #fff;
            border-radius: 50px;
            padding: 2px 6px;
            font-size: 12px;
            margin-left: 10px;
        }

        #user-info {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        #profile-picture img {
            width: 50px;
            border-radius: 50%;
            margin: 0 20px;
            box-shadow:  0 0 10px rgba(167, 53, 255, 0.5);
        }

        a {
            color: #CAC9C8;
            font-weight: 500;
            transition: 0.5s;
        }
        
        .home:hover {
            color: #DD00AC;
            transition: 0.5s;
        }

        #notification {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
        }
        
        #file-manager li {
            cursor: pointer;
            background-color: rgb(255, 255, 255);
            margin: 20px;
            border-radius: 4px;
            text-align: center;
            color: black;
        }

        .nav-container {
            width: 100%;
        }

        ul {
            list-style-type: none;
            margin: 0;
        }

        li {
            margin: 0 20px;
            display: flex;
            align-items: center;
        }

        .upgrade-btn {
            border-style: solid;
            border-width: 0px;
            border-color: transparent;
            border-radius: 100px;
            background-color: transparent;
            background: linear-gradient(94deg, #dd00ac 10.66%, #7130c3 53.03%, #410093 96.34%, rgba(255, 0, 238, 0.26) 191.41%, rgba(255, 59, 212, 0) 191.43%);
            background-size: 200% auto;
            color: var(--color-white);
            font-size: 16px;
            font-weight: 400;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            line-height: 50px;
            letter-spacing: 0.5px;
            width: auto;
            transition: 0.4s;
            height: 40px;
            line-height: 40px;
            padding: 0 20px;
        }

        .main-content {
            margin-left: 270px;
            padding: 20px;
            padding-top: 100px;
            box-sizing: border-box;
            background-color: #0E0E12;
            min-height: 100vh;
        }

        .gradient-text-link {
            font-weight: bold;
            font-size: 30px;
            text-decoration: none;
            background: linear-gradient(to right, purple, pink);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: background-position 0.5s ease;
            background-size: 200% 100%;
        }

        .gradient-text-link:hover {
            background-position: 100% 0;
        }

        #file-manager {
            width: 100%;
            padding: 50px;
        }
        /* Styling the input and button */
        #new-file-name {
            width: 20%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            margin-right: 10px;
            margin-bottom: 20px;
        }

        #file-manager button {
            width: 400px;
            height: 100%;
            padding: 20px 30px;
            border-radius: 16px;
            border: none;
            background-color: #1E1E29;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        #file-manager button i {
            font-size: 24px; /* Adjust icon size to match the first image */
        }

        #file-manager button .fa-arrow-right {
            font-size: 14px; /* Smaller arrow */
            margin-left: auto; /* Align arrow to the right */
        }

        #file-manager button:hover {
            background-color: #3B1F4C;
        }

        #document-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: left; /* Centers the items */
            gap: 20px; /* Adjust gap between the cards */
            padding: 0;
            margin: 0 ; /* Centers the list */
            width: 100%; /* Adjusts the width of the entire document list */
        }

        /* Styling for each file box */
        .file-box {
            background-color: #1E1E29 !important; 
            padding: 0;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            background-color: black;
            text-align: left;
            cursor: pointer;
            position: relative;
            width: 180px; 
            height: 220px;
            display: flex;
            flex-direction: column;
        }
        .file-box img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
        }
        .text-container {
            padding: 10px;
            background-color: #1E1E29;
            display: flex;
            width: 80%;
            flex-direction: column; /* Stack items vertically */
            justify-content: center; /* Center content vertically */
            align-items: flex-start; /* Align items to the left */
            cursor: default;
        }

        .text-container h4 {
            margin: 0;
            color: white;
            font-weight: bold;
        }

        .text-container p.file-date {
            margin: 5px 0 0 0;
            color: #A9A9A9;
            font-size: 12px;
        }

        .ellipsis-icon-wrapper {
            position: absolute;
            bottom: 10px;
            right: 10px;
            cursor: pointer;
            padding: 10px; /* Add padding to increase clickable area */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .text-container p {
            margin: 0;
            color: #A9A9A9;
            font-size: 12px;
        }

        .ellipsis-icon {
            cursor: pointer;
            font-size: 16px;
            color: #fff; /* Color for the icon */
            margin-left: 10px;
        }

        .options-menu {
            display: none;
            position: absolute;
            top: 35px;
            right: 0;
            background-color: #2E2E2E;
            color: white;
            padding: 10px;
            border-radius: 8px;
            width: 180px;
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .options-menu a {
            display: flex;
            align-items: center;
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
            font-size: 10px;
        }
        .options-menu a:hover {
            background-color: #444;
        }
        .options-menu a i {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div style="display: flex; align-items: center; padding-left: 40px;">
            <a href="/" class="gradient-text-link" style="margin: 0;">AiulabsAI</a>
        </div>
        <div>
            <ul style="display: flex;">
                <li><a class="upgrade-btn" href="/#pricing">Upgrade</a></li>
                <div id="user-info">
                    <div id="profile-picture"></div> <!-- Profile Picture will be displayed here -->
                </div>
            </ul>
        </div>
    </div>
    <div class="side-bar">
        <ul>
            <li><a href="/"><span class="icon"><i class="bi bi-house-door"></i></span>Home</a></li>
            <div style="border-bottom: 1px solid hsla(0, 0%, 100%, 0.1); margin: 10px 20px;"></div>
            <li><a href="/resumeAI"><span class="icon"><i class="fa-solid fa-bolt"></i></span> ResumeAI</a></li>
            <div style="border-bottom: 1px solid hsla(0, 0%, 100%, 0.1); margin: 10px 20px;"></div>
            <li><a href="/resumeAI"><span class="icon"><i class="fa-solid fa-gear"></i></span> Account settings</a></li>
        </ul>
    </div>



    <section class="main-content">
        <div id="file-manager">
            <h1><div style="color: #C382E9;" class="our-information-text" id="welcome-message"></div></h1>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                fetch('/auth/user')
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('welcome-message').textContent = `Welcome ${data.userName}, 👋🏻`;
                    })
                    .catch(error => console.error('Error fetching user info:', error));
                });
            </script>
            <p style="font-size: 20px;">Let us help you land your dream job!</p>
            
            <button onclick="createNewDocument()" style="display: flex; align-items: center;margin-top: 50px;">
                <i style="font-size: 24px; color: #EADDFF;" class="fa-regular fa-file-lines"></i>
                <div style="margin-left: 20px;">
                    <h3 style="margin: 0;display: flex;">Build a resume</h3>
                    <h5 style="margin: 0; color: #D3D3D3;">Create your resume with AI</h5>
                </div>
                <i style="font-size: 25px; margin-left: auto; color: #CE02A6;" class="fa-solid fa-arrow-right"></i>
            </button>
            



            <div style="border-bottom: 1px solid hsla(0, 0%, 100%, 0.1); margin: 50px 0;"></div>
            <h3>Existing Resumes</h3>
            <ul id="document-list">
            </ul>
            


        </div>
    </section>

  

    <script>
        // Load list of documents on page load
        window.onload = function() {
            loadDocumentList();
            fetch('/auth/user')
                .then(response => response.json())
                .then(data => {
                    if (data.profilePicture) {
                        const imgElement = document.createElement('img');
                        imgElement.src = data.profilePicture;
                        imgElement.alt = 'User Profile Picture';
                        document.getElementById('profile-picture').appendChild(imgElement);
                    }
                })
                .catch(error => console.error('Error fetching user data:', error));
        };

        function loadDocumentList() {
    fetch('https://aiulabs.io:3000/documents')
    .then(response => response.json())
    .then(data => {
        const documentList = document.getElementById('document-list');
        documentList.innerHTML = ''; // Clear the list before loading

        data.forEach(doc => {
            const listItem = document.createElement('li');
            listItem.className = 'file-box';

            // Create the image element for document preview
            const docImage = document.createElement('img');
            docImage.src = doc.previewImageUrl || 'path/to/default-image.jpg';
            docImage.alt = 'Resume Preview';

            // Add click event listener to the image
            docImage.addEventListener('click', function() {
                openDocument(doc.id); // Call openDocument() with the document ID
            });

            // Create the document title (file name) container
            const textContainer = document.createElement('div');
            textContainer.className = 'text-container';

            const fileName = document.createElement('h4');
            fileName.textContent = doc.title;

            // Create a paragraph for the date under the file name
            const fileDate = document.createElement('p');
            fileDate.className = 'file-date'; // Add a class for easy styling
            fileDate.textContent = doc.date || 'No Date'; // Use the actual date from your data

            // Append file name and date to the text container
            textContainer.appendChild(fileName);
            textContainer.appendChild(fileDate);

            // Create the wrapper for the ellipsis icon
            const ellipsisWrapper = document.createElement('div');
            ellipsisWrapper.className = 'ellipsis-icon-wrapper';

            // Create the ellipsis (three dots) icon
            const ellipsisIcon = document.createElement('i');
            ellipsisIcon.className = 'fa-solid fa-ellipsis-vertical ellipsis-icon';

            // Append the ellipsis icon to the wrapper
            ellipsisWrapper.appendChild(ellipsisIcon);

            // Create the options menu
            const optionsMenu = document.createElement('div');
            optionsMenu.className = 'options-menu';

            // Add menu options
            const downloadLink = document.createElement('a');
            downloadLink.innerHTML = '<i class="fa-solid fa-download"></i> Download PDF';
            downloadLink.href = `/download/${doc.id}`; // Adjust the link as needed

            const duplicateLink = document.createElement('a');
            duplicateLink.innerHTML = '<i class="fa-solid fa-copy"></i> Duplicate';
            duplicateLink.onclick = () => duplicateDocument(doc.id);

            const renameLink = document.createElement('a');
            renameLink.innerHTML = '<i class="fa-solid fa-pen"></i> Rename';
            renameLink.onclick = () => renameDocument(doc.id);

            const deleteLink = document.createElement('a');
            deleteLink.innerHTML = '<i class="fa-solid fa-trash"></i> Delete';
            deleteLink.onclick = () => removeDocument(doc.id);

            // Append menu options to the options menu
            optionsMenu.appendChild(downloadLink);
            optionsMenu.appendChild(duplicateLink);
            optionsMenu.appendChild(renameLink);
            optionsMenu.appendChild(deleteLink);

            // Append elements to the list item
            listItem.appendChild(docImage); // Image at the top
            listItem.appendChild(textContainer); // File name and date
            listItem.appendChild(ellipsisWrapper); // Ellipsis icon wrapped in a div
            listItem.appendChild(optionsMenu); // Hidden options menu

            // Append the list item to the document list
            documentList.appendChild(listItem);

            // Add event listener to toggle the options menu
            ellipsisWrapper.addEventListener('click', function(e) {
                e.stopPropagation();
                // Hide all other open menus
                document.querySelectorAll('.options-menu').forEach(menu => {
                    if (menu !== optionsMenu) {
                        menu.style.display = 'none';
                    }
                });
                // Toggle the clicked menu
                optionsMenu.style.display = optionsMenu.style.display === 'block' ? 'none' : 'block';
            });

            // Prevent click inside the menu from closing it
            optionsMenu.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });

        // Add a click event to the document to close the options menu if clicked outside
        document.addEventListener('click', function() {
            document.querySelectorAll('.options-menu').forEach(menu => {
                menu.style.display = 'none';
            });
        });
    })
    .catch(error => console.error('Error:', error));
}


        function createNewDocument() {
            const title = 'Untitled';  // Set the default title to "Untitled"
            fetch('https://aiulabs.io:3000/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ title }),  // Use the default title
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = `resumeAI?id=${data.documentId}`;
                } else {
                    alert('Error creating document. Please try again.');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        function removeDocument(documentId) {
            if (confirm('Are you sure you want to delete this document?')) {
                fetch(`https://aiulabs.io/remove/${documentId}`, {  // Changed from /delete/ to /remove/
                    method: 'DELETE',
                })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(text) });
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success) {
                        loadDocumentList();  // Reload the list after deleting the document
                    } else {
                        alert('Error deleting document. Please try again.');
                    }
                })
                .catch(error => console.error('Error:', error));
            }
        }

        function openDocument(documentId) {
            window.location.href = `resumeAI?id=${documentId}`;
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to toggle the options menu on click
            document.querySelectorAll('.ellipsis-icon').forEach((icon) => {
                icon.addEventListener('click', function(e) {
                    const optionsMenu = this.nextElementSibling;
                    // Close any open menus before opening the clicked one
                    document.querySelectorAll('.options-menu').forEach((menu) => {
                        if (menu !== optionsMenu) {
                            menu.style.display = 'none';
                        }
                    });
                    // Toggle the current menu
                    optionsMenu.style.display = optionsMenu.style.display === 'block' ? 'none' : 'block';
                    e.stopPropagation();  // Prevent click from propagating to body
                });
            });

            // Close the menu if clicked outside
            document.addEventListener('click', function() {
                document.querySelectorAll('.options-menu').forEach((menu) => {
                    menu.style.display = 'none';
                });
            });

            // Prevent menu from closing when clicking inside it
            document.querySelectorAll('.options-menu').forEach((menu) => {
                menu.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
    
    <script src="/views/js/checkauth.js"></script>
</body>
</html>